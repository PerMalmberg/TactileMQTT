<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="/script/jquery/jquery.mobile-1.4.4.min.css" />

		<!-- Our scripts depend on JQuery, so add it first of all -->
		<script src="/script/jquery/jquery-2.1.1.min.js"></script>
		<script src="/script/jquery/jquery.mobile-1.4.4.min.js"></script>

		<!-- Next, the configuration reader is utilized by all over, so add it next -->
		<script src="script/ConfigReader.js"></script>
		<script src="script/HTMLReader.js"></script>

		<script src="script/UICreator.js"></script>

		<!-- The MQTT related scripts -->
		<script src="script/mqtt/mqttws31.js"></script>		
		<script src="script/MQTTBackend.js"></script>

		<!-- Get things started -->
		<script type="text/javascript">
			
			$(window).load( function() {
				// Start MQTT backend
				$( document ).ready( function() {
					var cfg = new ConfigurationReader();
					if( cfg.Read( "/conf/tactile.json", true ) ) {
						var mqtt = MQTTBackend.Instance();
						mqtt.Start( cfg );
						mqtt.Subscribe( "#" );
					}

					// Place the elements based on configuration
					var uic = UICreator.Instance();
					uic.BuildPages();
				});			
			} );
		</script>
	</head>

	<body>		
		<div data-role="page" id="startupPage" data-title="Loading TactileMQTT">
			<!-- This is the page that will be displayed while the UI is being created. -->
			<div role="content" class="ui-content" data-title="Loading..." style="position: fixed, top: 50px; left:800px;">
				<p>Loading TactileMQTT UI...</p>
			</div>			
		</div>
		<!-- Additional pages will be created from the configuration -->
				
		
		<!-- Template data. Must not contain id-attributes as it is cloned at run-time. -->
		<div data-role="page" class="templatePage">
			<div role="content" class="ui-content">
				
			</div>
		</div>
	</body>
</html>